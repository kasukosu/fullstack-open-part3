{"version":3,"sources":["components/filter.js","components/personform.js","components/persons.js","moduls/personservice.js","components/notification.js","App.js","index.js"],"names":["Filter","newSearch","searchHandler","className","onChange","value","PersonForm","props","addPerson","newName","newNumber","nameChangeHandler","numberChangeHandler","onSubmit","type","Persons","console","log","persons","map","person","index","name","number","onClick","removePerson","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Notification","message","status","App","useState","setPersons","setNewName","setNewNumber","setNewSearch","showAll","setShowAll","errorMessage","setErrorMessage","setMessage","useEffect","personService","initialPersons","personsToShow","filter","item","toLowerCase","includes","e","newValue","target","length","preventDefault","find","alert","window","confirm","personObject","updated","catch","error","p","returnedPerson","concat","updatedPersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.1ff195cd.chunk.js","sourcesContent":["const Filter = ({newSearch, searchHandler}) => {\r\n    return (\r\n        <section className=\"filter\">\r\n            Filter numbers: <input onChange={searchHandler} value={newSearch} />\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default Filter;","const PersonForm = (props) => {\r\n    const {addPerson, newName, newNumber, nameChangeHandler, numberChangeHandler} = props;\r\n    return (\r\n        <section className=\"form\">\r\n            <form onSubmit={addPerson}>\r\n                <div>\r\n                <div>\r\n                    name: <input value={newName} onChange={nameChangeHandler}/>\r\n                </div>\r\n                <div>\r\n                number: <input value={newNumber} onChange={numberChangeHandler}/>\r\n\r\n                </div>\r\n                </div>\r\n                <div>\r\n                <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </section>\r\n    );\r\n}\r\n\r\nexport default PersonForm;","const Persons = (props) => {\r\n    console.log(props);\r\n    const {persons} = props;\r\n    return (\r\n        <section className=\"numbers\">\r\n            {persons && persons.map((person, index) => (\r\n                <div>\r\n                    <p key={index}>{person.name} {person.number}</p>\r\n                    <button onClick={() => {props.removePerson(person)}}>remove</button>\r\n                </div>\r\n            ))}\r\n        </section>\r\n\r\n    );\r\n}\r\n\r\nexport default Persons;","import axios from 'axios'\r\nconst baseUrl = 'api/persons'\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst create = newObject => {\r\n\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n    getAll,\r\n    create,\r\n    update,\r\n    remove,\r\n}","const Notification = (props) => {\r\n    const {message} = props;\r\n    return (\r\n        <div className={props.status}>\r\n            {message}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Notification;","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport './index.css'\r\nimport Filter from './components/filter'\r\nimport PersonForm from './components/personform'\r\nimport Persons from './components/persons'\r\nimport personService from './moduls/personservice'\r\nimport Notification from './components/notification'\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ addedPerson, setAddedPerson ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ newSearch, setNewSearch ] = useState('')\r\n  const [showAll, setShowAll] = useState(true)\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    personService.getAll()\r\n    .then(initialPersons => {\r\n      setPersons(initialPersons)\r\n    })\r\n  }, [0])\r\n\r\n  const personsToShow = showAll\r\n  ? persons\r\n  : persons.filter(item => (\r\n      item.name.toLowerCase().includes(newSearch)\r\n    ));\r\n\r\n\r\n  const addPerson = (e) => {\r\n    e.preventDefault()\r\n    const person = persons.find(e => e.name === newName);\r\n    if(person){\r\n      alert(`${newName} is already added to phonebook`);\r\n\r\n      if(window.confirm(`${newName} is already on the list. Update the number?`)){\r\n        const personObject = {\r\n          name: newName,\r\n          number: newNumber,\r\n        }\r\n        personService.update(person.id, personObject)\r\n        .then(updated => {\r\n          setNewName('')\r\n          setMessage(`Updated: ${personObject.name} - ${personObject.number}`);\r\n          setErrorMessage('')\r\n          personService.getAll()\r\n          .then(initialPersons => {\r\n            setPersons(initialPersons)\r\n          })\r\n        })\r\n        .catch(error => {\r\n          setErrorMessage(`person '${person.name}' was already deleted from server`)\r\n          setMessage('');\r\n          setPersons(persons.filter(p => p.id !== person.id))\r\n        })\r\n      }\r\n    }\r\n\r\n    else{\r\n      const personObject = {\r\n        name: newName,\r\n        number: newNumber,\r\n      }\r\n\r\n      personService.create(personObject)\r\n      .then(returnedPerson => {\r\n        if(returnedPerson){\r\n          setPersons(persons.concat(returnedPerson))\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setMessage(`Added ${personObject.name}`);\r\n        setErrorMessage('');\r\n        }else{\r\n          setErrorMessage(`person '${person.name}' was already added to server`)\r\n          setMessage('');\r\n          personService.getAll()\r\n            .then(initialPersons => {\r\n              setPersons(initialPersons)\r\n            })\r\n        }\r\n\r\n\r\n      })\r\n\r\n    }\r\n\r\n  }\r\n\r\n  const removePerson = (person) => {\r\n    console.log(person)\r\n    const id = person.id;\r\n    const name = person.name;\r\n    if(window.confirm(`Delete ${name}`)){\r\n      personService.remove(id)\r\n      .then(updatedPersons => {\r\n        console.log(updatedPersons);\r\n        setPersons(persons.filter(p => p.id !== id))\r\n        setMessage(`Deleted ${name}`);\r\n\r\n      })\r\n    }\r\n  }\r\n\r\n  const nameChangeHandler = (e) => {\r\n    console.log(e.target.value)\r\n    setNewName(e.target.value)\r\n  }\r\n  const numberChangeHandler = (e) => {\r\n    console.log(e.target.value)\r\n    setNewNumber(e.target.value)\r\n  }\r\n\r\n  const searchHandler = (e) => {\r\n    let newValue = e.target.value\r\n\r\n    if(newValue.length){\r\n      setShowAll(false);\r\n    }else{\r\n      setShowAll(true)\r\n    }\r\n    console.log(newValue)\r\n    setNewSearch(newValue);\r\n    console.log(persons.filter(item => (\r\n      item.name.includes(newSearch)\r\n    )))\r\n  }\r\n\r\n  return (\r\n    <main className=\"container\">\r\n      <h2>Phonebook</h2>\r\n\r\n      {errorMessage &&\r\n        <Notification status={'error'} message={errorMessage}/>\r\n      }\r\n\r\n      {message &&\r\n        <Notification status={'success'} message={message}/>\r\n      }\r\n\r\n      <Filter searchHandler={searchHandler} newSearch={newSearch} />\r\n\r\n      <h3>Add a new</h3>\r\n\r\n      <PersonForm\r\n        numberChangeHandler={numberChangeHandler}\r\n        nameChangeHandler={nameChangeHandler}\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n      />\r\n      <h3>Numbers</h3>\r\n      <Persons persons={personsToShow} removePerson={removePerson} />\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default App","import ReactDOM from 'react-dom'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <App />,\r\n  document.getElementById('root')\r\n)"],"sourceRoot":""}