(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{37:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),a=t.n(c),r=t(3),o=t(2),s=t(4),u=t.n(s),i=(t(37),t(0)),l=function(e){var n=e.newSearch,t=e.searchHandler;return Object(i.jsxs)("section",{className:"filter",children:["Filter numbers: ",Object(i.jsx)("input",{onChange:t,value:n})]})},d=function(e){var n=e.addPerson,t=e.newName,c=e.newNumber,a=e.nameChangeHandler,r=e.numberChangeHandler;return Object(i.jsx)("section",{className:"form",children:Object(i.jsxs)("form",{onSubmit:n,children:[Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{children:["name: ",Object(i.jsx)("input",{value:t,onChange:a})]}),Object(i.jsxs)("div",{children:["number: ",Object(i.jsx)("input",{value:c,onChange:r})]})]}),Object(i.jsx)("div",{children:Object(i.jsx)("button",{type:"submit",children:"add"})})]})})},j=function(e){console.log(e);var n=e.persons;return Object(i.jsx)("section",{className:"numbers",children:n&&n.map((function(n,t){return Object(i.jsxs)("div",{children:[Object(i.jsxs)("p",{children:[n.name," ",n.number]},t),Object(i.jsx)("button",{onClick:function(){e.removePerson(n)},children:"remove"})]})}))})},b="/api/persons",h=function(){return u.a.get(b).then((function(e){return e.data}))},f=function(e){return u.a.post(b,e).then((function(e){return e.data}))},m=function(e,n){return u.a.put("".concat(b,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){return u.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.message;return Object(i.jsx)("div",{className:e.status,children:n})},x=function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),s=Object(r.a)(a,2),u=s[0],b=s[1],x=Object(o.useState)(""),g=Object(r.a)(x,2),p=(g[0],g[1],Object(o.useState)("")),w=Object(r.a)(p,2),S=w[0],N=w[1],C=Object(o.useState)(""),y=Object(r.a)(C,2),H=y[0],k=y[1],P=Object(o.useState)(!0),D=Object(r.a)(P,2),A=D[0],E=D[1],J=Object(o.useState)(""),U=Object(r.a)(J,2),B=U[0],F=U[1],I=Object(o.useState)(""),L=Object(r.a)(I,2),q=L[0],z=L[1];Object(o.useEffect)((function(){h().then((function(e){c(e)}))}),[0]);var G=A?t:t.filter((function(e){return e.name.toLowerCase().includes(H)}));return Object(i.jsxs)("main",{className:"container",children:[Object(i.jsx)("h2",{children:"Phonebook"}),B&&Object(i.jsx)(v,{status:"error",message:B}),q&&Object(i.jsx)(v,{status:"success",message:q}),Object(i.jsx)(l,{searchHandler:function(e){var n=e.target.value;n.length?E(!1):E(!0),console.log(n),k(n),console.log(t.filter((function(e){return e.name.includes(H)})))},newSearch:H}),Object(i.jsx)("h3",{children:"Add a new"}),Object(i.jsx)(d,{numberChangeHandler:function(e){console.log(e.target.value),N(e.target.value)},nameChangeHandler:function(e){console.log(e.target.value),b(e.target.value)},addPerson:function(e){e.preventDefault();var n=t.find((function(e){return e.name===u}));if(n){if(alert("".concat(u," is already added to phonebook")),window.confirm("".concat(u," is already on the list. Update the number?"))){var a={name:u,number:S},r=n.id;m(r,a).then((function(e){b(""),z("Updated: ".concat(a.name," - ").concat(a.number)),F(""),h().then((function(e){c(e)}))})).catch((function(e){F("person '".concat(n.name,"' was already deleted from server")),z(""),c(t.filter((function(e){return e.id!==n.id})))}))}}else{var o={name:u,number:S};f(o).then((function(e){e?(c(t.concat(e)),b(""),N(""),z("Added ".concat(o.name)),F("")):(F("person '".concat(n.name,"' was already added to server")),z(""),h().then((function(e){c(e)})))}))}},newName:u,newNumber:S}),Object(i.jsx)("h3",{children:"Numbers"}),Object(i.jsx)(j,{persons:G,removePerson:function(e){console.log(e);var n=e.name,a=e.id;window.confirm("Delete ".concat(n," - ").concat(a))&&O(a).then((function(a){console.log(a),c(t.filter((function(n){return n.id!==e.id}))),z("Deleted ".concat(n))}))}})]})};a.a.render(Object(i.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.08d1134b.chunk.js.map